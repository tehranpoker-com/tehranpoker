!function(t){"use strict";function e(e,a){return a.children().each(function(){t(this).width(t(this).width())}),a}function a(e,a){t(".tacf-modal-head h3").html(e),t(".tacf-modal-body").html(a),t(".tacf-overlay").show(),t("#tacf-modal").show()}function n(){t(".tacf-modal-head h3").html(""),t(".tacf-modal-body").html(""),t(".tacf-overlay").hide(),t("#tacf-modal").hide()}t(document).on("click",".tacf-box-tabs a",function(){var e=t(this).attr("data-tab");return t(".tacf-box-tabs a").removeClass("active"),t(".tacf-tab-content").removeClass("active"),t(this).addClass("active"),t(e).addClass("active"),!1}),t(".tacf-ui-sortable").sortable({items:".tacf-row",opacity:1,revert:!1,cursor:"move",handle:".ui-sortable-handle",helper:e}).disableSelection(),t(".tacf-boxs-sortable").sortable({items:".tacf-row-sub",opacity:1,revert:!1,cursor:"move",handle:".ui-sortable-handle-sub",helper:e}).disableSelection(),t(document).on("click",".megapanel-icon-add",function(){var e=t(this),i=e.data("modal-title"),o=t(".tacf-search-input"),c=e.closest(".megapanel-icon-select");t("#tacf-modal").addClass(e.data("modal-size")),t.ajax({type:"GET",url:admin_ajax_url,data:{action:"megapanel_geticons"},success:function(e){a(i,e),t(".tacf-icon-selector").on("click",function(){var e=t(this).data("seticon");c.find("i").removeAttr("class").addClass(e),c.find("input").val(e).trigger("change"),c.find(".megapanel-icon-preview").removeClass("hidden"),c.find(".megapanel-icon-remove").removeClass("hidden"),n()}),o.keyup(function(){var e=t(this).val();t(".tacf-modal-body").find(".tacf-icon-selector").each(function(){var a=t(this);a.data("seticon").search(new RegExp(e,"i"))<0?a.hide():a.show()})})}})}),t(document).on("click",".add-element-widget-boxs",function(){var n=t(this),i=n.data("modal-title"),o=t(".tacf-search-input"),c=n.parent().find(".megapanel-sortable-options");return t("#tacf-modal").addClass(n.data("modal-size")),n.data("modal-search")||t(".tacf-modal-search").remove(),t(".tacf-boxs-sortable").sortable({items:".tacf-row-sub",opacity:1,revert:!1,cursor:"move",handle:".ui-sortable-handle-sub",helper:e}).disableSelection(),t.ajax({type:"POST",url:admin_ajax_url,data:{action:"widget_get_boxs_element",option:n.data("action"),opkey:n.data("opkey"),opname:n.data("opname")},success:function(e){return a(i,e),o.keyup(function(){var e=t(this).val();t(".tacf-modal-body").find(".itme-search").each(function(){var a=t(this);a.data("search").search(new RegExp(e,"i"))<0?a.hide():a.show()})}),t(".element-box-select").on("click",function(){var e=t(this).find(".tacf-set-element").clone();c.find(".ul-element-widget").append(e),e.removeClass("element-box-select").fadeIn()}),!1}}),!1}),t(document).on("click",".tacf-modal-close, .tacf-overlay",function(){n()}),t(document).on("keyup",".tacf_toggle_title",function(){t(this).parents("td").find(".tacf-title-item span").text(t(this).val())}),t(document).on("click",".tacf-collapse-button",function(){var e=t(this),a=t(this).parent().find(".tacf-toggle-input"),n=t(this).parent().parent().find(".tacf-toggle-content");return n.toggleClass("d-none"),n.is(":visible")?(e.find("i").addClass("fa-minus"),e.find("i").removeClass("fa-plus"),a.val("1")):(e.find("i").addClass("fa-plus"),e.find("i").removeClass("fa-minus"),a.val("0")),!1}),t(document).on("click",".tacf-button",function(){var e=t(this).parent().parent(),a=e.find(".tacf-clone").clone(),n=e.find("tr").length-1;return a.find(".tacf-input-key").each(function(){t(this).hasClass("tacf-input-uniqueid")&&t(this).val(Math.round((new Date).getTime()+100*Math.random())),t(this).attr("data-name",t(this).attr("data-name").replace("{key}",n)),t(this).renameAttr("data-name","name"),t(this).hasClass("articleeditor-content")&&ArticleEditor(".articleeditor-content"),t(this).hasClass("tacf-input-fileupload")&&t(this).attr("data-field",t(this).attr("data-field").replace("{key}",n)),t(this).hasClass("tacf-input-widget")&&(t(this).attr("data-widget",t(this).attr("data-widget").replace("{key}",n)),t(this).removeClass("tacf-input-widget")),t(this).removeClass("tacf-input-key")}),a.removeClass("tacf-clone"),t(this).hasClass("tacf-select")&&a.find("select.tacf-select2").select2(),e.find(".tacf-clone").before(a).fadeIn(),a.find(".tacf-input-fileupload").removeClass("tacf-input-fileupload").fileupload(),t(".tacf-input-colorpicker").length&&a.find(".tacf-input-colorpicker").removeClass("tacf-input-colorpicker").spectrum({allowEmpty:!1,showAlpha:!1}),!1}),t(document).on("click",".tacf-remove",function(){var e=t(this).parent().parent().find(".tacf-title-item span").html();return t(this).addClass("-confirm-delete-li"),t("#confirmation-delete").find(".modal-body").html(delete_confirm_text+" # "+e),t("#confirmation-delete").modal("show"),!1}),t(document).on("click","#confirmation-delete button",function(){"true"==t(this).attr("value")&&t(".-confirm-delete-li").parent().parent().fadeOut().remove();t(".-confirm-delete-li").removeClass("-confirm-delete-li")}),t(document).on("click",".tacf-remove-sub",function(){return t(this).parent().fadeOut().remove(),!1}),t.fn.extend({renameAttr:function(e,a,n){var i;return this.each(function(){i=t.attr(this,e),t.attr(this,a,i),t.removeAttr(this,e),!1!==n&&t.removeData(this,e.replace("data-",""))})}})}(jQuery);