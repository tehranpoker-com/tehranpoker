/***************************************************************************|
 * Project:      Creative upload plugins                                    |
 * File:         media-upload.php                                           |
//--------------------------------------------------------------------------|
 * @link http://themearabia.net/                                            |
 * @copyright 2017.                                                         |
 * @author Eng Hossam Hamed <themearabia@gmail.com> <eng.h.hamed@gmail.com> |
 * @package Creative image Manager                                          |
 * @version 3.0                                                             |
 * http://codecanyon.net/item/creative-upload-plugins/7827831               |
//--------------------------------------------------------------------------|
****************************************************************************/
function preview(a,b){if(b.width&&b.height){var e=(b.width,b.height,$("#imgedit-sizer").val());$("#imgedit-sel-width").val(Math.round(b.width*e)),$("#imgedit-sel-height").val(Math.round(b.height*e));var f=Math.round(b.x1),g=Math.round(b.y1),h=Math.round(b.x2-f),i=Math.round(b.y2-g);$("#imgedit-x").val(f),$("#imgedit-y").val(g),$("#imgedit-w").val(h),$("#imgedit-h").val(i),$("#imgedit-selection").val('{"x":'+f+',"y":'+g+',"w":'+h+',"h":'+i+"}"),h>="100"&&i>="100"?$("div.imgedit-crop").removeClass("disabled"):$("div.imgedit-crop").addClass("disabled")}}jQuery(document).ready(function(){function a(a){var b=$("#imgedit-history").val(),c="";if("rleft"==a)if(""==b)var c='{"r":90}';else var c=',{"r":90}';if("rright"==a)if(""==b)var c='{"r":-90}';else var c=',{"r":-90}';if("flipv"==a)if(""==b)var c='{"f":1}';else var c=',{"f":1}';if("fliph"==a)if(""==b)var c='{"f":2}';else var c=',{"f":2}';if("crop"==a){var d=$("#imgedit-selection").val();if(""!=d)if($("#imgedit-w").val()>=100&&$("#imgedit-h").val()>=100)if(""==b)var c='{"c":'+d+"}";else var c=',{"c":'+d+"}";else if(""==b)var c='{"v":1}';else var c=',{"v":1}'}if(""==b){var e="["+c+"]";$("#imgedit-history").val(e),$("#image_undo").removeClass("disabled")}else{b=b.replace("[",""),b=b.replace("]","");var e="["+b+c+"]";$("#imgedit-history").val(e)}return encodeURI(e)}$(function(){$("img#imgedit").imgAreaSelect({handles:!0,fadeSpeed:200,onSelectChange:preview})}),$("#insertonlybutton").on('click', function(){var a=$("#imgedit").attr("src");$("#imgedit-save").val(a)}),$("#crop").on('click', function(){var b=$("#imgedit-id").val();$("#imgedit").attr("src","media-upload.php?action=imgedit&history="+a("crop")+"&id="+b),$("#imgedit-selection").val("")}),$("#rotate_rleft").on('click', function(){var b=$("#imgedit-id").val();$("#imgedit").attr("src","media-upload.php?action=imgedit&history="+a("rleft")+"&id="+b)}),$("#rotate_rright").on('click', function(){var b=$("#imgedit-id").val();$("#imgedit").attr("src","media-upload.php?action=imgedit&history="+a("rright")+"&id="+b)}),$("#flip_vertically").on('click', function(){var b=$("#imgedit-id").val();$("#imgedit").attr("src","media-upload.php?action=imgedit&history="+a("flipv")+"&id="+b)}),$("#flip_horizontally").on('click', function(){var b=$("#imgedit-id").val();$("#imgedit").attr("src","media-upload.php?action=imgedit&history="+a("fliph")+"&id="+b)})});