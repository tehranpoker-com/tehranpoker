function creative_media_upload(e,t,i,a=!1,n="",r="",o=""){var c=".cmp-"+e+"-button";void 0===t&&(t="image"),void 0===i&&(i="type"),$(document).on("click",c,function(){var c=$(window).width()-160,d=$(window).height()-100;return"gallery"==t?window.restore_send_to_gallery=window.send_to_gallery:window.restore_send_to_editor=window.send_to_editor,tb_show("creative media upload",media_upload_url+"?type="+t+"&tab="+i+"&TB_iframe=true&height="+d+"&width="+c),a?creative_media_upload_send_content():"gallery"==t?creative_media_upload_send_gallery(e):creative_media_upload_send_image(e,n,o,r),!1}),$(".cmp-input-"+e).change(function(){""!=$(this).val()?($(".cmp-"+e+"-preview").show(),$(".cmp-"+e+"-preview .icon-remove").show(),$(".cmp-"+e+"-button").hide(),$(".cmp-"+e+"-preview .icon-change").show(),$(".cmp-"+e+"-preview img").attr("src",$(".cmp-input-"+e).val())):""!=r?($(".cmp-"+e+"-preview").hide(),$(".cmp-"+e+"-button").show(),$(".cmp-"+e+"-preview img").attr("src",r)):($(".cmp-"+e+"-preview").hide(),$(".cmp-"+e+"-button").show(),$(".cmp-"+e+"-preview img").attr("src",""))}),$(document).on("click",".cmp-remove-"+e+"-image",function(){$(this).parent().hide(),$(this).hide(),""!=r?($(".cmp-"+e+"-button").show(),$(".cmp-"+e+"-preview img").attr("src",r),$(".cmp-"+e+"-preview .icon-remove").hide(),$(".cmp-"+e+"-button").show(),$(".cmp-"+e+"-preview .icon-change").hide(),$(".cmp-input-"+e).val("")):($(".cmp-"+e+"-button").show(),$(".cmp-input-"+e).val(""),$(".box-featured-"+e).removeClass("active"))}),$(".cmp-remove-"+e+"-gallery").on("click",function(){$(this).parent().hide(function(){$(this).hide(),$(".cmp-"+e+"-button").show(),$(".cmp-input-"+e).val("")})})}function creative_media_upload_send_image(e,t=!1,i="",a=""){window.send_to_editor=function(a){tb_remove(),t?"full"==i?$(".cmp-input-"+e).val(a.file):$(".cmp-input-"+e).val(a.thumbnail):$(".cmp-input-"+e).val(a.fileid),$(".cmp-"+e+"-preview").show(),$(".cmp-"+e+"-button").hide(),"image"==a.filetype?"full"==i?$(".cmp-"+e+"-preview img").attr("src",a.file):$(".cmp-"+e+"-preview img").attr("src",a.thumbnail):"audio"==a.filetype&&($(".cmp-"+e+"-player-audio").show(),playSong(a.file,a.mimes)),$(".cmp-"+e+"-preview").append('<a class="cmp-'+e+'-button icon-change"><i class="bx bxs-image-add"></i></a><a class="cmp-remove-'+e+'-image icon-remove"><i class="bx bx-minus"></i></a>'),window.send_to_editor=window.restore_send_to_editor}}function creative_media_upload_send_content(e){return window.send_to_editor=function(e){tb_remove(),imghtml='<img src="'+e.file+'" >',tinymce.activeEditor.selection.setContent(imghtml),window.restore_send_to_editor=window.send_to_editor},!1}function creative_media_upload_send_gallery(e){window.send_to_gallery=function(t){imgurl=$("input",t).attr("value"),tb_remove(),"undefined"==typeof imgurl&&(imgurl=$(t).attr("value")),$(".cmp-input-"+e).val(imgurl),$(".cmp-"+e+"-gallery").show().attr("title","Gallery ids="+imgurl),$(".cmp-"+e+"-button").hide(),window.send_to_gallery=window.restore_send_to_gallery}}jQuery(document).ready(function(e){e(".creative-media-upload-accordion-title").on("click",function(){return e(this).parent().find(".creative-media-upload-accordion-body").toggle(),!1}),e(".creative-media-upload-gallery li").on("click",function(){return"selectd"==e(this).attr("class")?(e(this).find("input:checkbox").removeAttr("checked"),e(this).removeClass("selectd")):(e(this).addClass("selectd"),e(this).find("input:checkbox").attr("checked","checked")),!1}),e("#browser-uploader").on("click",function(){return e("#multi-file").hide(),e("#browser-file").show(),!1}),e("#multi-file-uploader").on("click",function(){return e("#browser-file").hide(),e("#multi-file").show(),!1})});var addExtImage={width:"",height:"",align:"alignnone",insert:function(){var e,t,i=this,a=document.forms[0],n="",r="";return""!=a.src.value&&""!=i.width&&(a.alt.value&&(n=a.alt.value.replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a.caption.value&&(r=(r=(r=a.caption.value.replace(/\r\n|\r/g,"\n")).replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")})).replace(/\s*\n\s*/g,"<br />")),t=r?"":' class="'+i.align+'"',e='<img alt="'+n+'" src="'+a.src.value+'"'+t+' width="'+i.width+'" height="'+i.height+'" />',a.url.value&&(url=a.url.value.replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e='<a href="'+url+'">'+e+"</a>"),r&&(e='[caption id="" align="'+i.align+'" width="'+i.width+'"]'+e+r+"[/caption]"),(window.dialogArguments||opener||parent||top).send_to_editor(e),!1)},resetImageData:function(){var e=addExtImage;e.width=e.height="",document.forms[0].src.value?(document.getElementById("status_img").innerHTML='<img src="assets/images/no.png" alt="" />',document.getElementById("preloadImg").src=""):document.getElementById("status_img").innerHTML="*"},updateImageData:function(){var e=addExtImage;e.width=e.preloadImg.width,e.height=e.preloadImg.height,document.getElementById("status_img").innerHTML='<img src="assets/images/yes.png" alt="" />',document.getElementById("preloadImg").src=document.getElementById("src").value},getImageData:function(){if(!jQuery("table.describe").hasClass("not-image")){var e=addExtImage,t=document.forms[0].src.value;if(!t)return e.resetImageData(),!1;document.getElementById("status_img").innerHTML='<img src="assets/images/loading.gif" alt="" width="16" />',e.preloadImg=new Image,e.preloadImg.onload=e.updateImageData,e.preloadImg.onerror=e.resetImageData,e.preloadImg.src=t}}};