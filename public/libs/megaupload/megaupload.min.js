!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.FileUpload=e(t.jQuery)}(this,function(t){function e(e,i){this.isInit=!1,this.element=e,this.input=t(this.element),this.settings=t.extend(!0,{field:"",type:"image",tab:"library",content:!1,src:!0,srcid:!1,image:"",size:"thumbnail",button:"",titletb:"media upload",messages:{iconupload:'<i class="bx bx-cloud-upload"></i>',iconchanges:'<i class="bx bxs-image-add"></i>',iconremove:'<i class="bx bx-minus"></i>',icondefault:"Default",upload:"upload",changes:"changes",remove:"Remove",default:"Default"},tpl:{wrap:'<div class="uploadfile-wrapper"><div class="input-group"></div></div>',prependgroup:'<div class="input-group-prepend"><span  class="button-{{ field }} btn btn-secondary" title="{{ upload }}">{{ iconupload }} {{ button }}</span></div>',preview:'<div class="preview-{{ field }} preview"></div>',removeButton:'<span class="remove-{{ field }} btn btn-danger" title="{{ remove }}">{{ iconremove }}</span>'}},i,this.input.data()),this.clearElement=this.clearElement.bind(this),this.media_upload=this.media_upload.bind(this),this.media_remove=this.media_remove.bind(this),this.media_change=this.media_change.bind(this),this.translateMessages(),this.translateVar(),this.createElements();var s={preview:".preview-"+this.settings.field,remove:".remove-"+this.settings.field,buttonupload:".button-"+this.settings.field};return this.elementclass=s,""!=this.input.val()?(t(this.elementclass.remove).show(),this.input.val()&&"image"==this.settings.type&&(this.settings.srcid?t(this.elementclass.preview).html('<img src="'+this.settings.srcid+'" />'):t(this.elementclass.preview).html('<img src="'+this.input.val()+'" />'))):this.elementclass.remove.length&&t(this.elementclass.remove).hide(),this.buttonupload=t(this.elementclass.buttonupload),this.buttonremove=t(this.elementclass.remove),this.buttonupload.on("click",this.media_upload),this.input.on("change",this.media_change),this.buttonremove.on("click",this.media_remove),!1}return e.prototype.media_remove=function(){return this.input.val(""),t(this.elementclass.remove).hide(),this.settings.image&&"image"==this.settings.type?t(this.elementclass.preview).html('<img src="'+this.settings.image+'" />'):"audio"==this.settings.type?t(".upload-"+this.settings.field+"-player-audio").hide():t(this.elementclass.preview).html("").hide(),!1},e.prototype.media_change=function(){if(this.input.val())if(t(this.elementclass.remove).show(),"image"==this.settings.type)t(this.elementclass.preview).show().html('<img src="'+this.input.val()+'" />');else if("audio"==this.settings.type){t(".upload-"+this.settings.field+"-player-audio").show();var e=this.input.val(),i=e.substr(e.lastIndexOf(".")+1);playSong(this.input.val(),i)}else t(this.elementclass.preview).html("").hide();else t(this.elementclass.remove).hide(),this.settings.image&&"image"==this.settings.type?t(this.elementclass.preview).show().html('<img src="'+this.settings.image+'" />'):t(this.elementclass.preview).html("").hide();return!1},e.prototype.media_upload=function(){var e=t(window).width()-160,i=t(window).height()-100;return this.input.val(""),t(this.elementclass.remove).hide(),t(this.elementclass.preview).html("").hide(),"gallery"==this.settings.type?window.restore_send_to_gallery=window.send_to_gallery:window.restore_send_to_editor=window.send_to_editor,tb_show(this.settings.titletb,media_upload_url+"?type="+this.settings.type+"&tab="+this.settings.tab+"&TB_iframe=true&height="+i+"&width="+e),this.settings.content||("gallery"==this.settings.type?this.media_upload_send_gallery(this.settings.field):this.media_upload_send_image(this.settings.field,this.settings.src,this.settings.size,this.settings.defult)),!1},e.prototype.media_upload_send_image=function(e,i,s,n){var a=this.settings,l=this.elementclass,o=this.input;window.send_to_editor=function(n){if(tb_remove(),"full"==s)var h=n.file;else h=n.thumbnail;i?o.val(h):o.val(n.fileid),t(l.remove).show(),t(l.preview).show(),"image"==a.type?t(l.preview).html('<img src="'+h+'" />'):"audio"==n.filetype?(t(".upload-"+e+"-player-audio").show(),playSong(n.file,n.mimes)):n.filetype,window.send_to_editor=window.restore_send_to_editor}},e.prototype.media_upload_send_gallery=function(t){this.settings,this.input;window.send_to_gallery=function(t){window.send_to_gallery=window.restore_send_to_gallery}},e.prototype.clearElement=function(){},e.prototype.isTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},e.prototype.translateMessages=function(){for(var t in this.settings.tpl)for(var e in this.settings.messages)this.settings.tpl[t]=this.settings.tpl[t].replace("{{ "+e+" }}",this.settings.messages[e])},e.prototype.translateVar=function(){for(var t in this.settings.tpl)for(var e in this.settings)this.settings.tpl[t]=this.settings.tpl[t].replace("{{ "+e+" }}",this.settings[e])},e.prototype.createElements=function(){this.isInit=!0,this.input.wrap(t(this.settings.tpl.wrap)),this.wrapper=this.input.parent(),this.prependgroup=t(this.settings.tpl.prependgroup),this.prependgroup.insertAfter(this.input),this.removeButton=t(this.settings.tpl.removeButton),this.removeButton.prependTo(this.prependgroup),this.preview=t(this.settings.tpl.preview),this.preview.insertAfter(this.wrapper),this.settings.image&&this.preview.html('<img src="'+this.settings.image+'" />'),!0===this.isTouchDevice()&&this.wrapper.addClass("touch-fallback"),this.input.attr("disabled")&&(this.isDisabled=!0,this.wrapper.addClass("disabled")),!1===this.isDisabled&&!0===this.settings.showRemove&&(this.clearButton=t(this.settings.tpl.clearButton),this.clearButton.insertAfter(this.input),this.clearButton.on("click",this.clearElement)),this.filenameWrapper=t(this.settings.tpl.filename)},e.prototype.init=function(){this.createElements()},t.fn.fileupload=function(i){return this.each(function(){t.data(this,"fileupload")||t.data(this,"fileupload",new e(this,i))}),this},e}),function(t){"use strict";t(".input-file-upload").fileupload(),t('[data-toggle="fileupload"]').fileupload()}(jQuery);